waLBerla_add_test_executable( MMOC2DCircularConvectionTest MMOC2DCircularConvectionTest.cpp )
target_link_libraries       ( MMOC2DCircularConvectionTest hyteg walberla::core convection_particles constant_stencil_operator )
if(CMAKE_BUILD_TYPE MATCHES "Release")
    waLBerla_execute_test(NAME MMOC2DCircularConvectionTest)
    waLBerla_execute_test(NAME MMOC2DCircularConvectionTestMPI2 COMMAND $<TARGET_FILE:MMOC2DCircularConvectionTest> PROCESSES 2 )
endif()

waLBerla_add_test_executable( MMOC2DCircularConvectionBlendingTest MMOC2DCircularConvectionBlendingTest.cpp )
target_link_libraries       ( MMOC2DCircularConvectionBlendingTest hyteg walberla::core convection_particles constant_stencil_operator )
if(CMAKE_BUILD_TYPE MATCHES "Release")
    waLBerla_execute_test(NAME MMOC2DCircularConvectionBlendingTest)
    waLBerla_execute_test(NAME MMOC2DCircularConvectionBlendingTestMPI2 COMMAND $<TARGET_FILE:MMOC2DCircularConvectionBlendingTest> PROCESSES 2 )
    waLBerla_execute_test(NAME MMOC2DCircularConvectionBlendingTestMPI4 COMMAND $<TARGET_FILE:MMOC2DCircularConvectionBlendingTest> PROCESSES 4 )
endif()

waLBerla_add_test_executable( MMOC3DCircularConvectionTest MMOC3DCircularConvectionTest.cpp )
target_link_libraries       ( MMOC3DCircularConvectionTest hyteg walberla::core convection_particles constant_stencil_operator )
if(CMAKE_BUILD_TYPE MATCHES "Release")
    waLBerla_execute_test(NAME MMOC3DCircularConvectionTest LABELS longrun)
    waLBerla_execute_test(NAME MMOC3DCircularConvectionTestMPI2 COMMAND $<TARGET_FILE:MMOC3DCircularConvectionTest> PROCESSES 2 )
    waLBerla_execute_test(NAME MMOC3DCircularConvectionTestMPI4 COMMAND $<TARGET_FILE:MMOC3DCircularConvectionTest> PROCESSES 4 )
endif()

waLBerla_add_test_executable( MMOC2DSwirlingFlowConvectionTest MMOC2DSwirlingFlowConvectionTest.cpp )
target_link_libraries       ( MMOC2DSwirlingFlowConvectionTest hyteg walberla::core convection_particles constant_stencil_operator )
if(CMAKE_BUILD_TYPE MATCHES "Release")
    waLBerla_execute_test(NAME MMOC2DSwirlingFlowConvectionTest)
    waLBerla_execute_test(NAME MMOC2DSwirlingFlowConvectionTestMPI2 COMMAND $<TARGET_FILE:MMOC2DSwirlingFlowConvectionTest> PROCESSES 2 )

endif()

waLBerla_add_test_executable( ConvectionParticlesCouplingTest ConvectionParticlesCouplingTest.cpp )
target_link_libraries       ( ConvectionParticlesCouplingTest walberla::core convection_particles )
waLBerla_execute_test(NAME ConvectionParticlesCouplingTest)

waLBerla_add_test_executable( P2UnsteadyConvectionDiffusion2DTest P2UnsteadyConvectionDiffusion2DTest.cpp )
target_link_libraries       ( P2UnsteadyConvectionDiffusion2DTest hyteg walberla::core convection_particles constant_stencil_operator )
waLBerla_execute_test(NAME P2UnsteadyConvectionDiffusion2DTest)
waLBerla_execute_test(NAME P2UnsteadyConvectionDiffusion2DTestMPI2 COMMAND $<TARGET_FILE:P2UnsteadyConvectionDiffusion2DTest> PROCESSES 2 )
waLBerla_execute_test(NAME P2UnsteadyConvectionDiffusion2DTestMPI4 COMMAND $<TARGET_FILE:P2UnsteadyConvectionDiffusion2DTest> PROCESSES 4 )

waLBerla_add_test_executable( MMOCStepTestWithStorageFromFile MMOCStepTestWithStorageFromFile.cpp )
target_link_libraries       ( MMOCStepTestWithStorageFromFile walberla::core convection_particles )
if(CMAKE_BUILD_TYPE MATCHES "Release")
    waLBerla_execute_test(NAME MMOCStepTestWithStorageFromFile)
    waLBerla_execute_test(NAME MMOCStepTestWithStorageFromFileMPI COMMAND $<TARGET_FILE:MMOCStepTestWithStorageFromFile> PROCESSES 4 )
endif()
