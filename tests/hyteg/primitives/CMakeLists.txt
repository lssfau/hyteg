waLBerla_add_test_executable( Face Face+CellGeometryTest.cpp )
target_link_libraries       ( Face hyteg walberla::core )
waLBerla_execute_test(NAME Face+CellGeometryTest)

waLBerla_add_test_executable( PrimitiveID PrimitiveID+TypeTest.cpp )
target_link_libraries       ( PrimitiveID hyteg walberla::core )
waLBerla_execute_test(NAME PrimitiveID+TypeTest)

waLBerla_add_test_executable( PrimitiveDataTest PrimitiveDataTest.cpp )
target_link_libraries       ( PrimitiveDataTest hyteg walberla::core )
waLBerla_execute_test(NAME PrimitiveDataTest)

waLBerla_add_test_executable( rootOnlySetupStorageTest rootOnlySetupStorageTest.cpp )
target_link_libraries       ( rootOnlySetupStorageTest hyteg walberla::core )
waLBerla_execute_test(NAME rootOnlySetupStorageTest COMMAND $<TARGET_FILE:rootOnlySetupStorageTest>)
waLBerla_execute_test(NAME rootOnlySetupStorageTest3 COMMAND $<TARGET_FILE:rootOnlySetupStorageTest> PROCESSES 3)
waLBerla_execute_test(NAME rootOnlySetupStorageTest8 COMMAND $<TARGET_FILE:rootOnlySetupStorageTest> PROCESSES 8)

waLBerla_add_test_executable( PrimitiveStorageTest PrimitiveStorageTest.cpp )
target_link_libraries       ( PrimitiveStorageTest hyteg walberla::core )
waLBerla_execute_test(NAME PrimitiveStorageTest1 COMMAND $<TARGET_FILE:PrimitiveStorageTest>)
waLBerla_execute_test(NAME PrimitiveStorageTest3 COMMAND $<TARGET_FILE:PrimitiveStorageTest> PROCESSES 3)
waLBerla_execute_test(NAME PrimitiveStorageTest8 COMMAND $<TARGET_FILE:PrimitiveStorageTest> PROCESSES 8)

waLBerla_add_test_executable( PrimitiveRelativeOrderingTest PrimitiveRelativeOrderingTest.cpp )
target_link_libraries       ( PrimitiveRelativeOrderingTest hyteg walberla::core )
waLBerla_execute_test(NAME PrimitiveRelativeOrderingTest)

if (HYTEG_BUILD_WITH_MPI)
    waLBerla_add_test_executable( SubStorageTest SubStorageTest.cpp )
    target_link_libraries       ( SubStorageTest hyteg walberla::core )
    waLBerla_execute_test(NAME SubStorageTest1 COMMAND $<TARGET_FILE:SubStorageTest>)
    waLBerla_execute_test(NAME SubStorageTest4 COMMAND $<TARGET_FILE:SubStorageTest> PROCESSES 4)
else()
    waLBerla_add_test_executable( SubStorageTest SubStorageTest.cpp )
    target_link_libraries       ( SubStorageTest hyteg walberla::core )
    waLBerla_execute_test(NAME SubStorageTest)
endif()

if (HYTEG_BUILD_WITH_MPI)
    waLBerla_add_test_executable( PrimitiveStorageParallelSetupTest PrimitiveStorageParallelSetupTest.cpp )
    target_link_libraries       ( PrimitiveStorageParallelSetupTest hyteg walberla::core )
    waLBerla_execute_test(NAME PrimitiveStorageParallelSetupTest1 COMMAND $<TARGET_FILE:PrimitiveStorageParallelSetupTest>)
    waLBerla_execute_test(NAME PrimitiveStorageParallelSetupTest2 COMMAND $<TARGET_FILE:PrimitiveStorageParallelSetupTest> PROCESSES 2)
    waLBerla_execute_test(NAME PrimitiveStorageParallelSetupTest3 COMMAND $<TARGET_FILE:PrimitiveStorageParallelSetupTest> PROCESSES 3)
    waLBerla_execute_test(NAME PrimitiveStorageParallelSetupTest4 COMMAND $<TARGET_FILE:PrimitiveStorageParallelSetupTest> PROCESSES 4)
endif()

